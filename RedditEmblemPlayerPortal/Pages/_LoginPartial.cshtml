@using Microsoft.AspNetCore.Identity
@using RedditEmblemPlayerPortal.Data
@using RedditEmblemPlayerPortal.Extensions
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href=".">
        <img src="@await UserManager.GetDiscordAvatarURL(User)" class="avatarSmall" onerror="this.src='images/discordavatardefault.jpg';" alt="Discord Avatar" />
        <span style="padding-left: 5px;">@await UserManager.GetDiscordUsername(User)</span>
      </a>
      <form asp-controller="Account" asp-action="Logout" method="post" id="logoutForm">
        <ul class="nav navbar-right">
          <li>
            <button type="submit" class="btn btn-link navbar-btn navbar-link" aria-label="Log Out" title="Log Out"><i class="fas fa-sign-out-alt fa-lg"></i></button>
          </li>
        </ul>
      </form>
    </div>
  </nav>
}
else
{
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href=".">
        Reddit Emblem Player Portal
      </a>
    </div>
  </nav>
}